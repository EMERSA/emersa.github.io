<html lang="en" class=" -webkit-">
    <head>
    <meta charset="UTF-8">
    
  
      <link rel="apple-touch-icon" type="image/png" href="https://cpwebassets.codepen.io/assets/favicon/apple-touch-icon-5ae1a0698dcc2402e9712f7d01ed509a57814f994c660df9f7a952f3060705ee.png">
  
      <meta name="apple-mobile-web-app-title" content="CodePen">
  
      <link rel="shortcut icon" type="image/x-icon" href="https://cpwebassets.codepen.io/assets/favicon/favicon-aec34940fbc1a6e787974dcd360f2c6b63348d4b1f4e06c77743096d55480f33.ico">
  
      <link rel="mask-icon" type="image/x-icon" href="https://cpwebassets.codepen.io/assets/favicon/logo-pin-b4b4269c16397ad2f0f7a01bcdf513a1994f4c94b8af2f191c09eb0d601762b1.svg" color="#111">
  
  
  
    
      <script src="https://cpwebassets.codepen.io/assets/common/stopExecutionOnTimeout-2c7831bb44f98c1391d6a4ffda0e1fd302503391ca806e7fcc7b9b87197aec26.js"></script>
  
  
    <title>CodePen - nippleJS</title>
  
      <link rel="canonical" href="https://codepen.io/YoannM/pen/gapmMG">
    
    
    <link rel="stylesheet" href="//yoannmoinet.github.io/nipplejs/stylesheets/styles.css" data-inprogress="">
  <link rel="stylesheet" href="//yoannmoinet.github.io/nipplejs/stylesheets/github-light.css" data-inprogress="">
    
  <style>
  body {
    margin: 0;
    padding: 0;
    margin-top: 20px;
    max-width: 1024px;
    margin-left: auto;
    margin-right: auto;
  }
  
  #buttons {
    position: relative;
    border: solid 1px #aaa;
    display: inline-block;
    width: 100%;
    border-radius: 10px;
    height: 50px;
    overflow: hidden;
    margin-bottom: 20px;
    box-sizing: border-box;
  }
  
  .button {
    display: inline-block;
    background: #ccc;
    color: black;
    height: 50px;
    width: 33%;
    margin: 0;
    margin-right: -3px;
    text-align: center;
    line-height: 45px;
    font-size: 25px;
    cursor: pointer;
    -webkit-touch-callout: none;
    -webkit-user-select: none;
    -khtml-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
  }
  
  .button:hover {
    background: #eee;
  }
  
  .button:active {
    background: #ddd;
  }
  
  .button.active {
    color: white;
    background: #888;
  }
  
  .button:nth-child(2) {
    width: 34%;
    border-left: solid 1px #aaa;
    border-right: solid 1px #aaa;
  }
  
  .highlight {
    display: none;
  }
  
  .highlight.active {
    display: block;
  }
  
  .zone {
    display: none;
    position: absolute;
    width: 100%;
    height: 100%;
    left: 0;
  }
  
  .zone.active {
    display: block;
  }
  
  .zone > h1 {
    position: absolute;
    padding: 10px 10px;
    margin: 0;
    color: white;
    right: 0;
    bottom: 0;
  }
  
  .zone.dynamic {
    background: rgba(0, 0, 255, 0.1);
  }
  
  .zone.semi {
    background: rgba(255, 255, 255, 0.1);
  }
  
  .zone.static {
    background: rgba(255, 0, 0, 0.1);
  }
  </style>
  
    <script>
    window.console = window.console || function(t) {};
  </script>
  
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prefixfree/1.0.7/prefixfree.min.js"></script>
  
    
  </head>
  
  <body translate="no">
  <div id="buttons">
    <div data-type="dynamic" class="button dynamic ">dynamic</div>
    <div data-type="semi" class="button semi">semi</div>
    <div data-type="static" class="button static active">static</div>
  </div>
  <div id="zone_joystick">
    <div id="debug">
      <ul>
        <li class="position">
          position :
          <ul>
            <li class="x">x : <span class="data">791.5</span></li>
            <li class="y">y : <span class="data">602</span></li>
          </ul>
        </li>
        <li class="force">force : <span class="data">1.4360896614156793</span></li>
        <li class="pressure">pressure : <span class="data">0.5</span></li>
        <li class="distance">distance : <span class="data">50</span></li>
        <li class="angle">
          angle :
          <ul>
            <li class="radian">radian : <span class="data">4.304239876629601</span></li>
            <li class="degree">degree : <span class="data">246.61477894278624</span></li>
          </ul>
        </li>
        <li class="direction">
          direction :
          <ul>
            <li class="x">x : <span class="data">left</span></li>
            <li class="y">y : <span class="data">down</span></li>
            <li class="angle">angle : <span class="data">down</span></li>
          </ul>
        </li>
      </ul>
      <div class="dump"><div>#28 : <span class="data">dir:right</span></div><div>#29 : <span class="data">plain:down</span></div><div>#30 : <span class="data">dir:down</span></div><div>#31 : <span class="data">plain:left</span></div><div>#32 : <span class="data">end</span></div></div>
    </div>
    <div class="zone dynamic  " style="touch-action: none;"><h1>dynamic</h1></div>
    <div class="zone semi"><h1>semi</h1></div>
    <div class="zone static active" style="touch-action: none;"><h1>static</h1><div class="nipple collection_1" id="nipple_1_2" style="position: absolute; opacity: 0.5; display: block; z-index: 999; transition: opacity 250ms ease 0s; top: 50%; left: 50%;"><div class="back" style="position: absolute; display: block; width: 100px; height: 100px; margin-left: -50px; margin-top: -50px; background: red; opacity: 0.5; border-radius: 50%;"></div><div class="front" style="width: 50px; height: 50px; position: absolute; display: block; margin-left: -25px; margin-top: -25px; background: red; opacity: 0.5; border-radius: 50%; left: 0px; top: 0px; transition: none 0s ease 0s;"></div></div></div>
  </div>
  <br>
  <div>
    <a href="https://codepen.io/YoannM/full/gapmMG" target="_blank">&gt; Open the demo in a new window.</a>
  </div>
    <script src="//yoannmoinet.github.io/nipplejs/javascripts/nipplejs.js"></script>
        <script id="rendered-js">
  var s = function (sel) {
    return document.querySelector(sel);
  };
  var sId = function (sel) {
    return document.getElementById(sel);
  };
  var removeClass = function (el, clss) {
    el.className = el.className.replace(new RegExp('\\b' + clss + ' ?\\b', 'g'), '');
  };
  var joysticks = {
    dynamic: {
      zone: s('.zone.dynamic'),
      color: 'blue',
      multitouch: true },
  
    semi: {
      zone: s('.zone.semi'),
      mode: 'semi',
      catchDistance: 150,
      color: 'white' },
  
    static: {
      zone: s('.zone.static'),
      mode: 'static',
      position: {
        left: '50%',
        top: '50%' },
  
      color: 'red' } };
  
  
  var joystick;
  
  // Get debug elements and map them
  var elDebug = sId('debug');
  var elDump = elDebug.querySelector('.dump');
  var els = {
    position: {
      x: elDebug.querySelector('.position .x .data'),
      y: elDebug.querySelector('.position .y .data') },
  
    force: elDebug.querySelector('.force .data'),
    pressure: elDebug.querySelector('.pressure .data'),
    distance: elDebug.querySelector('.distance .data'),
    angle: {
      radian: elDebug.querySelector('.angle .radian .data'),
      degree: elDebug.querySelector('.angle .degree .data') },
  
    direction: {
      x: elDebug.querySelector('.direction .x .data'),
      y: elDebug.querySelector('.direction .y .data'),
      angle: elDebug.querySelector('.direction .angle .data') } };
  
  
  
  
  var timeoutCreate;
  function createThrottle(evt) {
    clearTimeout(timeoutCreate);
    timeoutCreate = setTimeout(() => {
      createNipple(evt);
    }, 100);
  }
  
  sId('buttons').onclick = sId('buttons').ontouchend = createThrottle;
  
  createNipple('dynamic');
  
  function bindNipple() {
    joystick.on('start end', function (evt, data) {
      dump(evt.type);
      debug(data);
    }).on('move', function (evt, data) {
      debug(data);
    }).on('dir:up plain:up dir:left plain:left dir:down ' +
    'plain:down dir:right plain:right',
    function (evt, data) {
      dump(evt.type);
    }).
    on('pressure', function (evt, data) {
      debug({
        pressure: data });
  
    });
  }
  
  function createNipple(evt) {
    var type = typeof evt === 'string' ?
    evt : evt.target.getAttribute('data-type');
    if (joystick) {
      joystick.destroy();
    }
    removeClass(s('.zone.active'), 'active');
    removeClass(s('.button.active'), 'active');
    removeClass(s('.highlight.active'), 'active');
    s('.highlight.' + type).className += ' active';
    s('.button.' + type).className += ' active';
    s('.zone.' + type).className += ' active';
    joystick = nipplejs.create(joysticks[type]);
    console.log(joystick, nipplejs);
    bindNipple();
  }
  
  // Print data into elements
  function debug(obj) {
    function parseObj(sub, el) {
      for (var i in sub) {
        if (typeof sub[i] === 'object' && el) {
          parseObj(sub[i], el[i]);
        } else if (el && el[i]) {
          el[i].innerHTML = sub[i];
        }
      }
    }
    setTimeout(function () {
      parseObj(obj, els);
    }, 0);
  }
  
  var nbEvents = 0;
  
  // Dump data
  function dump(evt) {
    setTimeout(function () {
      if (elDump.children.length > 4) {
        elDump.removeChild(elDump.firstChild);
      }
      var newEvent = document.createElement('div');
      newEvent.innerHTML = '#' + nbEvents + ' : <span class="data">' +
      evt + '</span>';
      elDump.appendChild(newEvent);
      nbEvents += 1;
    }, 0);
  }
  //# sourceURL=pen.js
      </script>
  
    
  
  
  
  </body></html>